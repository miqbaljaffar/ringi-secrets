<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>稟議詳細 | 稟議書管理システム</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link rel="stylesheet" href="../assets/css/detail.css" />
  </head>
  <body>
    <div class="container" id="detail-content" style="display:none;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <a href="list.html" style="text-decoration: none; color: #0088cc; font-size: 14px">
          <i class="fas fa-arrow-left"></i> 一覧に戻る
        </a>
      </div>

      <!-- Stamp status dikendalikan display-nya via JS -->
      <div id="stamp-approved" class="stamp stamp-approved" style="display: none;"></div>
      <div id="stamp-rejected" class="stamp stamp-rejected" style="display: none;"></div>
      <div id="stamp-withdrawn" class="stamp stamp-withdrawn" style="display: none;"></div>

      <h1>稟議書詳細: <span id="lbl_id"></span></h1>
      
      <p style="text-align:center; font-weight:bold; color: #555;">申請者: <span id="lbl_applicant"></span> | 申請日: <span id="lbl_date"></span></p>

      <!-- BAGIAN FORM PAJAK (Hanya ditampilkan jika docType === tax) -->
      <div id="tax-section" style="display: none;">
          <h2>基本情報 (Basic Info)</h2>
          <table class="detail-table" style="width: 100%; text-align: left; line-height: 1.8;">
              <tr>
                  <th width="150">商号 (Company)</th>
                  <td><span id="tax_s_name"></span> (<span id="tax_s_kana"></span>)</td>
              </tr>
              <tr>
                  <th>代表者 (Rep)</th>
                  <td>
                      <span id="tax_s_rep_name"></span><br>
                      <span style="font-size: 0.9em; color: #666;">
                          自宅: 〒<span id="tax_s_rep_pcode"></span> <span id="tax_s_rep_address"></span> <span id="tax_s_rep_address2"></span>
                      </span>
                  </td>
              </tr>
              <tr>
                  <th>住所 (Address)</th>
                  <td>〒<span id="tax_s_office_pcode"></span><br><span id="tax_s_office_address"></span> <span id="tax_s_office_address2"></span></td>
              </tr>
              <tr>
                  <th>電話番号 (Tel)</th>
                  <td><span id="tax_s_office_tel"></span></td>
              </tr>
          </table>

          <h2>税務情報 (Tax Info)</h2>
          <table class="detail-table" style="width: 100%; text-align: left; line-height: 1.8;">
              <tr>
                  <th width="150">管轄税務署</th><td id="tax_s_tax_office"></td>
                  <th width="150">決算月</th><td id="tax_n_closing_month"></td>
              </tr>
              <tr>
                  <th>納税No</th><td id="tax_s_tax_num"></td>
                  <th>電子申告ID</th>
                  <td>
                      国税: <span id="tax_s_national_tax_id"></span><br>
                      地方税: <span id="tax_s_local_tax_id"></span>
                  </td>
              </tr>
          </table>

          <h2>契約内容 (Contract)</h2>
          <div class="section">
              <p><strong>経緯:</strong> <br><span id="tax_s_situation" style="white-space: pre-wrap;"></span></p>
              <p><strong>開始日:</strong> <span id="tax_dt_contract_start"></span></p>
          </div>
      </div>

      <!-- BAGIAN FORM UMUM (Hanya ditampilkan jika docType === common) -->
      <div id="common-section" style="display: none;">
          <div class="section">
             <div class="form-group">
                <label class="form-label">件名</label>
                <div class="form-control-wrapper"><span id="common_s_title"></span></div>
             </div>
             <div class="form-group">
                <label class="form-label">概要</label>
                <div class="form-control-wrapper" style="white-space: pre-wrap;" id="common_s_overview"></div>
             </div>
             <table class="approval-table" style="margin-top:20px;">
                 <thead><tr><th>分類</th><th>支払先</th><th>金額</th></tr></thead>
                 <tbody id="details-tbody">
                     <!-- Diisi melalui JS jQuery -->
                 </tbody>
             </table>
          </div>
      </div>

      <h2>承認ルート</h2>
      <div class="section">
            <table class="approval-table">
                <thead>
                    <tr>
                        <th>Role</th>
                        <th>Status</th>
                        <th>Approver</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody id="approval-route-tbody">
                    <!-- Diisi melalui JS jQuery -->
                </tbody>
            </table>
      </div>

      <!-- Tombol Aksi (Hanya ditampilkan sesuai logic js permission) -->
      <div class="btn-area action-approval" style="display:none;">
            <button type="button" class="btn btn-danger" id="btn-reject">
              <i class="fas fa-times"></i> 否認 (Reject)
            </button>
            <button type="button" class="btn btn-primary" id="btn-approve">
              <i class="fas fa-check"></i> 承認 (Approve)
            </button>
      </div>

    </div>
    
    <div id="detail-loading" style="text-align:center; margin: 50px 0; font-size: 20px;">
        <i class="fas fa-spinner fa-spin"></i> 読み込み中...
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/modules/detail.js"></script>
  </body>
</html>